# 問題のある企業名の全量レポート

## 実行日時
2025年12月18日

## 実行結果

### 総問題数
**318,873件** のドキュメントで、nameフィールドに正しい企業名（「株式会社〇〇」や「〇〇株式会社」形式）が入っていません。

### 問題の種類別内訳

1. **法人格なし**: 209,613件
   - 法人格（株式会社、有限会社など）が含まれていない企業名

2. **空**: 40,744件
   - nameフィールドが空またはnull

3. **個人名・役員名**: 37,105件
   - 代表者名や役員名がnameフィールドに入っている
   - 例: 「（取）工藤春夫，石川洋（監）石川好江」
   - 例: 「(社長)曽根達也(監査役)曽根弘子」

4. **事業内容**: 31,411件
   - 事業内容の説明がnameフィールドに入っている
   - 例: 「総務業務の事務代行,事務用品等の調達、管理」
   - 例: 「ドラム缶充填ライン製造・組立、ドラム缶充填ラインメンテナンス」

### CSVファイル別の内訳
すべてのドキュメントが「(不明)」となっています。これは、`lastImportSource`フィールドが設定されていないためです。

## 生成されたファイル

- **`invalid_company_names_full_report_1765999808803.json`** (286 MB)
  - 全318,873件の詳細データを含むJSONレポート
  - 以下の情報を含みます:
    - `summary`: サマリー情報（総数、種類別、ファイル別）
    - `companies`: 全問題ドキュメントの詳細リスト
    - `groupedByIssueType`: 問題の種類別にグループ化
    - `groupedByFile`: CSVファイル別にグループ化

## レポートファイルの構造

```json
{
  "summary": {
    "total": 318873,
    "byIssueType": {
      "no_corporate_suffix": 209613,
      "person_name": 37105,
      "business_description": 31411,
      "empty": 40744
    },
    "byFile": {
      "(不明)": 318873
    }
  },
  "companies": [
    {
      "docId": "...",
      "name": "...",
      "corporateNumber": "...",
      "issueType": "...",
      ...
    }
  ],
  ...
}
```

## 次のステップ

1. **レポートファイルの確認**: `invalid_company_names_full_report_1765999808803.json`を確認
2. **CSVファイルの特定**: 法人番号を使って、各ドキュメントがどのCSVファイルから来たかを特定
3. **修正方法の検討**:
   - CSVファイルを修正して再インポート
   - 法人番号APIから正しい企業名を取得
   - 手動で確認・修正

## 注意事項

- レポートファイルは286 MBと大きいため、メモリに注意してください
- すべてのドキュメントのソースが「(不明)」となっているため、CSVファイルとの紐付けが必要です
- 法人番号が「9」で始まる13桁のドキュメントは、CSVファイルから来た可能性が高いです
