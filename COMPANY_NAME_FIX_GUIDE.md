# 企業名修正ガイド

## 問題の概要

CSVファイルの「会社名」列に、正しい企業名ではなく以下のような内容が入っている場合があります：

1. **個人名**: 「小西貴俊」など
2. **事業内容の説明**: 「総務業務の事務代行,事務用品等の調達、管理」など
3. **空欄**: 会社名が空の場合

## 分析結果

`scripts/analyze_company_names.py` スクリプトを使用して、問題のある行を特定できます。

### 使用方法

```bash
# 単一ファイルを分析
python3 scripts/analyze_company_names.py csv/36.csv

# 複数ファイルを分析
python3 scripts/analyze_company_names.py csv/36.csv csv/53.csv csv/54.csv

# ディレクトリ内のすべてのCSVを分析
python3 scripts/analyze_company_names.py csv/*.csv
```

## 修正方法

### 方法1: 手動修正（少数の場合）

1. 分析スクリプトで問題のある行を特定
2. CSVファイルを開いて該当行を修正
3. 正しい企業名に置き換える

### 方法2: 他の列から推測して修正（自動化可能）

以下の列から正しい企業名を推測できます：

- **説明列**: 「説明」や「概要」列に企業名が含まれている場合
- **URL列**: 企業のWebサイトから企業名を取得
- **代表者名**: 代表者名から企業名を推測（限定的）

### 方法3: 法人番号から取得（推奨）

法人番号が正しく入力されている場合、法人番号から企業名を取得できます。

## 修正スクリプトの作成

必要に応じて、以下のような修正スクリプトを作成できます：

1. **法人番号から企業名を取得するスクリプト**
   - 法人番号APIを使用して正しい企業名を取得
   - CSVファイルを更新

2. **他の列から企業名を推測するスクリプト**
   - 「説明」列などから企業名を抽出
   - パターンマッチングで企業名を特定

3. **手動確認用のレポート生成スクリプト**
   - 問題のある行をExcelやCSV形式で出力
   - 修正後の値を入力できるフォーマット

## 次のステップ

1. **問題の範囲を確認**
   ```bash
   python3 scripts/analyze_company_names.py csv/36.csv
   ```

2. **修正方法を決定**
   - 問題が少数（100件未満）→ 手動修正
   - 問題が多数（100件以上）→ 自動修正スクリプトを作成

3. **修正を実行**
   - 手動修正: CSVファイルを直接編集
   - 自動修正: 修正スクリプトを実行

## 注意事項

- 修正前に必ずバックアップを取る
- 修正後は検証を行う
- 法人番号が正しい場合は、法人番号から企業名を取得するのが最も確実
